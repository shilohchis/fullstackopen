(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,t,n){e.exports=n(40)},20:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(13),c=n.n(u),l=n(2),o=function(e){var t=e.type,n=e.label;return r.a.createElement("div",null,r.a.createElement("button",{type:t},n))},i=function(e){var t=e.label,n=e.inputVal,a=e.changeInputVal;return r.a.createElement("div",null,r.a.createElement("label",null,t),r.a.createElement("input",{value:n,onChange:a}))},f=function(e){var t=e.data,n=t.button,a=t.inputs,u=n.type,c=n.label,l=n.submitHandler;return r.a.createElement("form",{onSubmit:l},a.map((function(e){var t=e.label,n=e.value,a=e.valueHandler;return r.a.createElement(i,{key:t,label:"".concat(t,":"),inputVal:n,changeInputVal:function(e){return a(e,t)}})})),r.a.createElement(o,{type:u,label:c}))},m=function(e){var t=e.value,n=e.changeValue;return r.a.createElement(r.a.Fragment,null,r.a.createElement(i,{label:"filter shown with",inputVal:t,changeInputVal:function(e){return n(e.target.value)}}))},s=function(e){var t=e.datas,n=e.showKeys,a=e.onDelete;return r.a.createElement(r.a.Fragment,null,t.map((function(e){return r.a.createElement("div",{key:n.map((function(t){return"".concat(e[t])}))},r.a.createElement("span",null,n.map((function(t){return"".concat(e[t]," ")}))),r.a.createElement("button",{onClick:function(){return t=e.id,void a(t);var t}},"delete"))})))},d=function(e){var t=e.number,n=e.text;switch(t){case 6:return r.a.createElement("h6",null,n);case 5:return r.a.createElement("h5",null,n);case 4:return r.a.createElement("h4",null,n);case 3:return r.a.createElement("h3",null,n);case 2:return r.a.createElement("h2",null,n);default:return r.a.createElement("h1",null,n)}},b=(n(20),function(e){var t=e.notification,n=t.text,a=t.type;return r.a.createElement("div",{className:n?"flash flash-".concat(a):"hide"},r.a.createElement("p",null,n))}),h=n(14),p=n.n(h),v=n(3),E=n.n(v),w="/api/persons",y=function(e){return E.a.post(w,e).then((function(e){return e.data}))},g=function(){return E.a.get(w).then((function(e){return e.data}))},j=function(e){return E.a.delete("".concat(w,"/").concat(e)).then((function(e){return e.data}))},O=function(e,t){return E.a.put("".concat(w,"/").concat(t),e).then((function(e){return e.data}))},k=function(){var e={type:"",text:""},t=Object(a.useState)(!0),n=Object(l.a)(t,2),u=n[0],c=n[1],o=Object(a.useState)(""),i=Object(l.a)(o,2),h=i[0],v=i[1],E=Object(a.useState)(""),w=Object(l.a)(E,2),k=w[0],x=w[1],S=Object(a.useState)(""),V=Object(l.a)(S,2),C=V[0],H=V[1],I=Object(a.useState)([]),L=Object(l.a)(I,2),D=L[0],F=L[1],J=Object(a.useState)([]),K=Object(l.a)(J,2),N=K[0],A=K[1],B=Object(a.useState)(e),P=Object(l.a)(B,2),R=P[0],T=P[1],U=function(){setTimeout((function(){T(e)}),3e3)},q=function(e){var t=e.target.value,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(n){case"name":x(t);break;default:H(t)}},z={button:{type:"submit",label:"add",submitHandler:function(e){e.preventDefault();var t=D.find((function(e){return e.name.toLowerCase()===k.toLowerCase()||e.number===C})),n={name:k,number:C};if(t){var a=k?"name":"phone";window.confirm("".concat(k.toLowerCase()===t.name.toLowerCase()?k:C," is already added to phonebook, replace the old ").concat(a," with a new one?"))&&O(n,t.id).then((function(e){console.log(e),F(D.map((function(n){return t.id==n.id?e:n}))),T({type:"success",text:"Updated ".concat(k)}),U()}))}else y(n).then((function(e){g(),G(),T({type:"success",text:"Added ".concat(k)}),U()})),x(""),H("")}},inputs:[{label:"name",value:k,valueHandler:q},{label:"phone",value:C,valueHandler:q}]},G=function(){g().then((function(e){return F(e)}))};return Object(a.useEffect)((function(){G()}),[]),r.a.createElement("div",null,r.a.createElement(d,{number:2,text:"Phonebook"}),r.a.createElement(b,{notification:R}),r.a.createElement(m,{value:h,changeValue:function(e){if(v(e),e.length>0){var t=p.a.filter(D,(function(t,n){for(var a=0,r=0,u=Object.keys(t);r<u.length;r++){var c=u[r];new RegExp(e,"i").test(t[c])&&++a}if(a>0)return t}));A(t),c(!1)}else c(!0)}}),r.a.createElement(d,{number:2,text:"add a new"}),r.a.createElement(f,{data:z}),r.a.createElement(d,{number:2,text:"Numbers"}),r.a.createElement(s,{datas:u?D:N,showKeys:["name","number"],onDelete:function(e){var t=D.find((function(t){return t.id==e}));j(e).then((function(t){F(D.filter((function(t){return t.id!=e})))})).catch((function(e){T({type:"error",text:"Information of ".concat(t.name," has already been removed from server")}),U()}))}}))};c.a.render(r.a.createElement(k,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.78bcec6b.chunk.js.map