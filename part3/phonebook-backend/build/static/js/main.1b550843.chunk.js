(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,t,n){e.exports=n(40)},20:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),u=n.n(c),o=n(2),l=function(e){var t=e.type,n=e.label;return r.a.createElement("div",null,r.a.createElement("button",{type:t},n))},i=function(e){var t=e.label,n=e.inputVal,a=e.changeInputVal;return r.a.createElement("div",null,r.a.createElement("label",null,t),r.a.createElement("input",{value:n,onChange:a}))},s=function(e){var t=e.data,n=t.button,a=t.inputs,c=n.type,u=n.label,o=n.submitHandler;return r.a.createElement("form",{onSubmit:o},a.map((function(e){var t=e.label,n=e.value,a=e.valueHandler;return r.a.createElement(i,{key:t,label:"".concat(t,":"),inputVal:n,changeInputVal:function(e){return a(e,t)}})})),r.a.createElement(l,{type:c,label:u}))},f=function(e){var t=e.value,n=e.changeValue;return r.a.createElement(r.a.Fragment,null,r.a.createElement(i,{label:"filter shown with",inputVal:t,changeInputVal:function(e){return n(e.target.value)}}))},m=function(e){var t=e.datas,n=e.showKeys,a=e.onDelete;return r.a.createElement(r.a.Fragment,null,t.map((function(e){return r.a.createElement("div",{key:n.map((function(t){return"".concat(e[t])}))},r.a.createElement("span",null,n.map((function(t){return"".concat(e[t]," ")}))),r.a.createElement("button",{onClick:function(){return t=e.id,void a(t);var t}},"delete"))})))},d=function(e){var t=e.number,n=e.text;switch(t){case 6:return r.a.createElement("h6",null,n);case 5:return r.a.createElement("h5",null,n);case 4:return r.a.createElement("h4",null,n);case 3:return r.a.createElement("h3",null,n);case 2:return r.a.createElement("h2",null,n);default:return r.a.createElement("h1",null,n)}},p=(n(20),function(e){var t=e.notification,n=t.text,a=t.type;return r.a.createElement("div",{className:n?"flash flash-".concat(a):"hide"},r.a.createElement("p",null,n))}),b=n(14),h=n.n(b),v=n(3),E=n.n(v),y="/api/persons",g=function(e){return E.a.post(y,e).then((function(e){return e.data}))},w=function(){return E.a.get(y).then((function(e){return e.data}))},j=function(e){return E.a.delete("".concat(y,"/").concat(e)).then((function(e){return e.data}))},O=function(e,t){return E.a.put("".concat(y,"/").concat(t),e).then((function(e){return e.data}))},x=function(){var e={type:"",text:""},t=Object(a.useState)(!0),n=Object(o.a)(t,2),c=n[0],u=n[1],l=Object(a.useState)(""),i=Object(o.a)(l,2),b=i[0],v=i[1],E=Object(a.useState)(""),y=Object(o.a)(E,2),x=y[0],k=y[1],S=Object(a.useState)(""),V=Object(o.a)(S,2),C=V[0],H=V[1],I=Object(a.useState)([]),L=Object(o.a)(I,2),D=L[0],F=L[1],J=Object(a.useState)([]),K=Object(o.a)(J,2),N=K[0],A=K[1],B=Object(a.useState)(e),P=Object(o.a)(B,2),R=P[0],T=P[1],U=function(){setTimeout((function(){T(e)}),3e3)},q=function(e){var t=e.target.value,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(n){case"name":k(t);break;default:H(t)}},z={button:{type:"submit",label:"add",submitHandler:function(e){e.preventDefault();var t=D.find((function(e){return e.name.toLowerCase()===x.toLowerCase()||e.number===C})),n={name:x,number:C};if(t){var a=x?"name":"phone";window.confirm("".concat(x.toLowerCase()===t.name.toLowerCase()?x:C," is already added to phonebook, replace the old ").concat(a," with a new one?"))&&O(n,t.id).then((function(e){console.log(e),F(D.map((function(n){return t.id==n.id?e:n}))),T({type:"success",text:"Updated ".concat(x)}),U()})).catch((function(e){console.log(e.response.data),T({type:"error",text:e.response.data.error}),U()}))}else g(n).then((function(e){w(),G(),T({type:"success",text:"Added ".concat(x)}),U()})).catch((function(e){console.log(e.response.data),T({type:"error",text:e.response.data.error}),U()})),k(""),H("")}},inputs:[{label:"name",value:x,valueHandler:q},{label:"phone",value:C,valueHandler:q}]},G=function(){w().then((function(e){return F(e)}))};return Object(a.useEffect)((function(){G()}),[]),r.a.createElement("div",null,r.a.createElement(d,{number:2,text:"Phonebook"}),r.a.createElement(p,{notification:R}),r.a.createElement(f,{value:b,changeValue:function(e){if(v(e),e.length>0){var t=h.a.filter(D,(function(t,n){for(var a=0,r=0,c=Object.keys(t);r<c.length;r++){var u=c[r];new RegExp(e,"i").test(t[u])&&++a}if(a>0)return t}));A(t),u(!1)}else u(!0)}}),r.a.createElement(d,{number:2,text:"add a new"}),r.a.createElement(s,{data:z}),r.a.createElement(d,{number:2,text:"Numbers"}),r.a.createElement(m,{datas:c?D:N,showKeys:["name","number"],onDelete:function(e){var t=D.find((function(t){return t.id==e}));j(e).then((function(n){F(D.filter((function(t){return t.id!=e}))),T({type:"success",text:"Success remove information of ".concat(t.name)})})).catch((function(e){T({type:"error",text:"Information of ".concat(t.name," has already been removed from server")}),U()}))}}))};u.a.render(r.a.createElement(x,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.1b550843.chunk.js.map