{"version":3,"sources":["components/Button.js","components/InputText.js","sections/FormBasic.js","sections/Search.js","components/FlatList.js","components/HeaderType.js","components/FlashCard.js","services/phonebook.js","pages/App.js","index.js"],"names":["Button","type","label","InputText","inputVal","changeInputVal","value","onChange","FormBasic","data","button","inputs","submitHandler","onSubmit","map","item","valueHandler","key","e","Search","changeValue","target","FlatList","datas","showKeys","onDelete","keyObj","onClick","id","HeaderType","number","text","FlashCard","notification","className","url","obj","axios","post","then","resp","get","delete","put","App","defaultNotif","useState","showAll","setShowAll","search","setSearch","newName","setNewName","newPhone","setNewPhone","persons","setPersons","filteredPersons","setFilteredPersons","notif","setNotif","resetNotif","setTimeout","dataForm","preventDefault","find","name","toLowerCase","req","window","confirm","phonebook","console","log","fetchList","useEffect","newSearch","length","filteredData","_","filter","val","idx","passedCount","Object","keys","k","RegExp","test","catch","err","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.78bcec6b.chunk.js","sourcesContent":["import React from 'react';\n\nconst Button = ({ type, label }) => {\n    return (\n        <div>\n            <button type={type}>{label}</button>\n        </div>\n    );\n};\n\nexport default Button;\n","import React from 'react';\n\nconst InputText = ({ label, inputVal, changeInputVal }) => {\n    return (\n        <div>\n            <label>{ label }</label>\n            <input value={inputVal} onChange={changeInputVal}/>\n        </div>\n    );\n};\n\nexport default InputText;\n","import React from 'react';\nimport Button from '../components/Button';\nimport InputText from '../components/InputText';\n\nconst FormBasic = ({ data }) => {\n    const { button, inputs } = data;\n    const { type, label, submitHandler } = button;\n    return (\n        <form onSubmit={submitHandler}>\n            {\n                inputs.map(item => {\n                    const { label, value, valueHandler } = item;\n                    return (\n                        <InputText key={label} label={`${label}:`} inputVal={value} changeInputVal={e => valueHandler(e, label)}/>\n                    );\n                })\n            }\n            <Button type={type} label={label} />\n        </form>\n    );\n}\n\nexport default FormBasic;\n","import React from 'react';\nimport InputText from '../components/InputText';\n\nconst Search = ({ value, changeValue }) => {\n    return (\n        <>\n            <InputText label=\"filter shown with\" inputVal={value} changeInputVal={e => changeValue(e.target.value)}/>\n        </>\n    );\n};\n\nexport default Search;\n","import React from 'react';\n\nconst FlatList = ({ datas, showKeys, onDelete }) => {\n    const confirmDelete = id => {\n        onDelete(id);\n    };\n\n    return (\n        <>\n        {\n            datas.map(data => {\n                return (\n                    <div key={showKeys.map( key => `${data[key]}` )}>\n                        <span>{ showKeys.map(keyObj => `${data[keyObj]} `) }</span>\n                        <button onClick={() => confirmDelete(data.id)}>delete</button>\n                    </div>\n                )\n            })\n        }\n        </>\n    );\n};\n\nexport default FlatList;\n","import React from 'react';\n\nconst HeaderType = ({ number, text }) => {\n    switch (number) {\n        case 6:\n            return <h6>{ text }</h6>\n        case 5:\n            return <h5>{ text }</h5>\n        case 4:\n            return <h4>{ text }</h4>\n        case 3:\n            return <h3>{ text }</h3>\n        case 2:\n            return <h2>{ text }</h2>\n        default:\n            return <h1>{ text }</h1>\n    }\n};\n\nexport default HeaderType;\n","import React from 'react';\nimport '../index.css';\n\nconst FlashCard = ({ notification }) => {\n    const { text, type } = notification;\n    return (\n        <div className={ !text ? 'hide' : `flash flash-${type}` }>\n            <p>{text}</p>\n        </div>\n    );\n};\n\nexport default FlashCard;\n","import axios from 'axios';\n\nconst url = '/api/persons';\n\nconst add = (obj) => {\n    const req = axios.post(url, obj);\n    return req.then(resp => {\n        return resp.data;\n    });\n};\n\nconst list = () => {\n    const req = axios.get(url);\n    return req.then(resp => {\n        return resp.data;\n    });\n};\n\nconst del = id => {\n    const req = axios.delete(`${url}/${id}`);\n    return req.then(resp => {\n        return resp.data;\n    });\n};\n\nconst update = (obj, id) => {\n    const req = axios.put(`${url}/${id}`, obj);\n    return req.then(resp => {\n        return resp.data;\n    });\n};\n\nexport default {\n    add,\n    list,\n    del,\n    update\n}\n","import React, { useState, useEffect } from 'react';\nimport FormBasic from '../sections/FormBasic';\nimport Search from '../sections/Search';\nimport FlatList from '../components/FlatList';\nimport HeaderType from '../components/HeaderType';\nimport FlashCard from '../components/FlashCard';\nimport _ from 'lodash';\nimport phonebook from '../services/phonebook';\n\nconst App = () => {\n    const defaultNotif = {\n        type: '',\n        text: ''\n    };\n    const [ showAll, setShowAll ] = useState(true);\n    const [ search, setSearch ] = useState('');\n    const [ newName, setNewName ] = useState('');\n    const [ newPhone, setNewPhone ] = useState('');\n    const [ persons, setPersons ] = useState([]);\n    const [filteredPersons, setFilteredPersons] = useState([]);\n    const [notif, setNotif] = useState(defaultNotif);\n\n    const resetNotif = () => {\n        setTimeout(() => {\n            setNotif(defaultNotif);\n        }, 3000);\n    };\n\n    const changeInputVal = ({ target: { value } }, type = null) => {\n        switch (type) {\n            case 'name':\n                setNewName(value);\n                break;\n            default:\n                setNewPhone(value);\n        }\n    };\n\n    const resetInput = () => {\n        setNewName('');\n        setNewPhone('');\n    };\n\n    const addNewData = e => {\n        e.preventDefault();\n        const find = persons.find( obj => obj.name.toLowerCase() === newName.toLowerCase() || obj.number === newPhone );\n        const req = { name: newName, number: newPhone };\n        if(!find) {\n            phonebook.add(req)\n                .then(resp => {\n                    phonebook.list()\n                    fetchList();\n                    setNotif({\n                        type: 'success',\n                        text: `Added ${newName}`\n                    });\n                    resetNotif();\n                });\n            resetInput();\n        } else {\n            const type = newName ? 'name' : 'phone';\n            const resp = window.confirm(`${newName.toLowerCase() === find.name.toLowerCase() ? newName : newPhone} is already added to phonebook, replace the old ${type} with a new one?`);\n            if(resp) {\n                phonebook.update(req, find.id)\n                    .then(resp => {\n                        console.log(resp);\n                        setPersons( persons.map(item => find.id == item.id ? resp : item) );\n                        setNotif({\n                            type: 'success',\n                            text: `Updated ${newName}`\n                        });\n                        resetNotif();\n                    });\n            }\n        }\n    };\n\n    const dataForm = {\n        button: { type: \"submit\", label: \"add\", submitHandler: addNewData },\n        inputs: [\n            { label: 'name', value: newName, valueHandler: changeInputVal },\n            { label: 'phone', value: newPhone, valueHandler: changeInputVal },\n        ]\n    };\n\n    const filterData = newSearch => {\n        setSearch(newSearch);\n        if(newSearch.length > 0) {\n            let filteredData = _.filter(persons, (val, idx) => {\n                let keysObj = Object.keys(val), passedCount = 0;\n                for (let k of keysObj) {\n                    let regPattern = new RegExp(newSearch, \"i\");\n                    if(regPattern.test(val[k])) ++passedCount;\n                }\n                if(passedCount > 0) {\n                    return val;\n                }\n            });\n            setFilteredPersons(filteredData);\n            setShowAll(false);\n        } else {\n            setShowAll(true);\n        }\n    };\n\n    const delRow = id => {\n        const obj = persons.find(obj => obj.id == id);\n        phonebook.del(id)\n            .then(resp => {\n                setPersons( persons.filter(obj => obj.id != id) );\n            })\n            .catch(err => {\n                setNotif({\n                    type: 'error',\n                    text: `Information of ${obj.name} has already been removed from server`\n                });\n                resetNotif();\n            });\n    };\n\n    const fetchList = () => {\n        phonebook.list()\n            .then(resp => setPersons(resp));\n    };\n\n    useEffect(() => {\n        fetchList();\n    }, []);\n\n    return (\n        <div>\n            <HeaderType number={2} text=\"Phonebook\"/>\n            <FlashCard notification={notif}/>\n            <Search value={search} changeValue={filterData}/>\n            <HeaderType number={2} text=\"add a new\"/>\n            <FormBasic data={dataForm}/>\n            <HeaderType number={2} text=\"Numbers\"/>\n            <FlatList datas={ showAll ? persons : filteredPersons } showKeys={['name', 'number']} onDelete={delRow}/>\n        </div>\n    );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './pages/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}